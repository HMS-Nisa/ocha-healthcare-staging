---
// src/layouts/LandingLayout.astro
import { Search, Menu, X } from 'lucide-react'; // ðŸ‘ˆ Added Menu & X icons
import Footer from '../components/Footer.astro';
import { WA_NUMBER } from '../config'; 

const { title, description } = Astro.props;
const waLink = `https://wa.me/${WA_NUMBER}?text=Hi Ocha, I need assistance with medical arrangements.`;

// ðŸ”´ YOUR IDs (PRESERVED)
const GA_MEASUREMENT_ID = 'G-WL0KG6Y6B8'; 
const CLARITY_PROJECT_ID = 'v0p5vbt2q2';
---

<!doctype html>
<html lang="en" class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content={description} />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/png" href="/favicon.png" />
        <title>{title}</title>
        <link href="https://api.fontshare.com/v2/css?f[]=satoshi@900,700,500,400&f[]=clash-display@400,500,600,700&display=swap" rel="stylesheet">

        {/* ðŸ“Š 1. GOOGLE ANALYTICS 4 (GA4) */}
        <script is:inline async src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}></script>
        <script is:inline define:vars={{ GA_MEASUREMENT_ID }}>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', GA_MEASUREMENT_ID);
        </script>

        {/* ðŸ“Š 2. MICROSOFT CLARITY */}
        <script is:inline define:vars={{ CLARITY_PROJECT_ID }}>
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", CLARITY_PROJECT_ID);
        </script>

    </head>
    <body class="bg-slate-50 font-sans text-slate-900 antialiased flex flex-col min-h-screen">
        
        {/* ðŸš€ NAVBAR START */}
        <header class="sticky top-0 w-full bg-slate-50/80 backdrop-blur-md z-50 border-b border-slate-100/50">
            <div class="max-w-7xl mx-auto px-6 h-20 relative flex items-center justify-between">
                
                {/* 1. LEFT: Logo */}
                <div class="relative z-20 flex-shrink-0">
                    <a href="/" class="flex items-center gap-2">
                        <img src="/assets/logo.png" alt="Ocha Healthcare" class="h-10 w-auto mix-blend-multiply" />
                    </a>
                </div>

                {/* 2. CENTER: Desktop Menu (Hidden on Mobile) */}
                <nav class="hidden md:flex absolute inset-0 w-full h-full items-center justify-center pointer-events-none z-10">
                    <div class="flex items-center gap-8 font-medium text-slate-600 pointer-events-auto">
                        <a href="/" class="hover:text-[#276CA1] transition-colors text-sm font-bold">Home</a>
                        <a href="/doctors" class="hover:text-[#276CA1] transition-colors text-sm font-bold">Doctors</a>
                        <a href="/blog" class="hover:text-[#276CA1] transition-colors text-sm font-bold flex items-center gap-2">
                            Guides 
                            <span class="bg-blue-100 text-[#276CA1] text-[10px] px-2 py-0.5 rounded-full font-extrabold uppercase tracking-wide">New</span>
                        </a>
                    </div>
                </nav>

                {/* 3. RIGHT: Desktop Actions (Hidden on Mobile) */}
                <div class="hidden md:flex relative z-20 flex-shrink-0 items-center gap-3">
                    <a href="/doctors" class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-full text-sm font-semibold text-slate-600 hover:border-[#276CA1] hover:text-[#276CA1] transition-all">
                        <Search className="w-4 h-4" />
                        <span>Find Specialist</span>
                    </a>

                    <a 
                        href={waLink} 
                        target="_blank" 
                        class="px-5 py-2.5 bg-[#276CA1] text-white font-bold rounded-full text-sm hover:bg-[#1f5682] transition-colors shadow-lg shadow-blue-900/10"
                    >
                        Book Consultation
                    </a>
                </div>

                {/* ðŸ“± 4. MOBILE HAMBURGER BUTTON (Visible only on Mobile) */}
                <button id="mobile-menu-btn" class="md:hidden relative z-20 p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors">
                    <Menu className="w-6 h-6" />
                </button>

            </div>

            {/* ðŸ“± MOBILE MENU DROPDOWN (Hidden by default) */}
            <div id="mobile-menu" class="hidden absolute top-full left-0 w-full bg-white border-b border-slate-100 shadow-xl flex flex-col p-6 gap-4 md:hidden">
                <a href="/" class="text-slate-600 font-bold text-lg py-2 border-b border-slate-50">Home</a>
                <a href="/doctors" class="text-slate-600 font-bold text-lg py-2 border-b border-slate-50">Doctors</a>
                <a href="/blog" class="text-slate-600 font-bold text-lg py-2 border-b border-slate-50 flex items-center justify-between">
                    Guides
                    <span class="bg-blue-100 text-[#276CA1] text-[10px] px-2 py-0.5 rounded-full font-extrabold uppercase tracking-wide">New</span>
                </a>
                
                {/* Mobile Actions */}
                <div class="flex flex-col gap-3 mt-4">
                    <a href="/doctors" class="flex items-center justify-center gap-2 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-600">
                        <Search className="w-4 h-4" />
                        Find Specialist
                    </a>
                    <a href={waLink} target="_blank" class="flex items-center justify-center px-4 py-3 bg-[#276CA1] text-white font-bold rounded-xl text-sm shadow-lg shadow-blue-900/10">
                        Book Consultation
                    </a>
                </div>
            </div>

        </header>
        {/* ðŸš€ NAVBAR END */}

        <slot />

        <Footer />
        
        {/* ðŸ“± MOBILE MENU SCRIPT */}
        <script is:inline>
            const btn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');

            if (btn && menu) {
                btn.addEventListener('click', () => {
                    menu.classList.toggle('hidden');
                });
            }
        </script>
    </body>
</html>